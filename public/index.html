<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
          content="Motus is a news sharing website that personalises itself to the user not the audience.">
    <meta property="og:description"
          content="Motus is a news sharing website that personalises itself to the user not the audience."/>
    <meta property="og:image" content="preview.jpg"/>
    <meta name="author" content="Liam Read">
    <link rel="icon" type="image/png" href="/favicon.png">

    <!-- Custom Meta title tags -->
    <meta property="og:title" content="Motus - Very Personal News"/>
    <title>Motus</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" type="text/css" rel="stylesheet">
    <link href="/public/css/style.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="http://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/list.js/1.1.0/list.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fingerprintjs2/1.5.0/fingerprint2.min.js"></script>
</head>
<body>
<header class="header-sticky">
    <nav class="navbar navbar-lg main-navbar" role="navigation" id="top-navigation">
        <div class="container nopad">
            <div class="row">
                <!-- Mobile Only -->
                <div class="navbar-header">
                    <a id="logo-link" class="brand" style="margin: 0; float: none;" href="/home">
                        <div id="loader" class="loader">Loading...</div>
                        <img id="logo" class="hidden" src="/public/images/logos/logo.png"/>
                    </a>
                    <!--                            <img src="/images/logos/logo.png" class="img-responsive pull-left logo-xs" alt="logo here">-->
                    <button type="button" class="navbar-toggle pull-right">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="nav-menu-line"></span>
                        <span class="nav-menu-line"></span>
                        <span class="nav-menu-line"></span>
                    </button>
                </div>
                <!-- Main Navigation -->
                <div class="collapse navbar-collapse">
                    <ul class="nav main-links navbar-nav navbar-left">
                        <li><a id="homeBtn" href="/home">Home</a></li>
                        <li><a id="aboutBtn" href="/about">About</a></li>
                        <li><a id="missonBtn" href="/mission">Mission Statement</a></li>
                    </ul>
                    <ul class="nav social-links navbar-nav navbar-right">
                        <li><a target="_blank" class="facebook" href=""><i class="fa fa-facebook"></i></a></li>
                        <li><a target="_blank" class="twitter" href=""><i class="fa fa-twitter"></i></a></li>
                        <li><a target="_blank" class="linkedin" href=""><i class="fa fa-linkedin"></i></a></li>
                        <li><a class="toggle" href=""><i id="inverseToggle" class="fa fa-toggle-on"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
</header>

<script>
    var socket = io();

    function Client(socket) {

        this.id = null;
        this.referrer = document.referrer;
        this.reso = [window.screen.availHeight, window.screen.availWidth];

        this.setId = function (id) {
            this.id = id;
        };

        /**
         * Returns a referral address if one exists otherwise nothing is passed.
         */
        this.getReferringDocument = function () {
            if (!this.referrer) {
                return 'none';
            } else {
                return this.referrer;
            }
        };

        /**
         * This is called when finding the starting resolution.
         * @returns {[*,*]}
         */
        this.getRes = function () {
            this.reso = [window.screen.availHeight, window.screen.availWidth];
        };

        /**
         * Checks if a Cookie has been presented before collecting information.
         */
        this.checkForCookie = function () {
            if (!document.cookie) {
                socket.emit('registerUser', {
                    ref: this.referrer,
                    reso: this.reso
                });
            } else {
                console.log("Cookie from previous session found");

                //getting cookie from previous session.
                var id = decipherCookie('id');
                this.setId(id);

                //emit the ID found in the cookie and also the path we received.
                socket.emit('assignOldUser', {
                    id: this.id
                });
            }
        };

        /**
         * When registering a new user we take there initial settings and using the ip info api also make note of
         * there outlined geo ip.
         */
        function updateAreaSettings(id) {

            $.get("http://ipinfo.io", function (response) {
                /**
                 * Using socket here so we send the information back for logging when it return from the request.
                 */
                socket.emit('updateUserAreaSettings', {
                    ip: response.ip,
                    county: response.city,
                    country: response.region,
                    id: id
                });

            }, "jsonp");
        }

        /**
         * Adds a new cookie for the user to track them across the website
         */
        this.addCookie = function (id) {
            document.cookie = 'id=' + id + ';' + ' createdAt=' + window.location.pathname + ';';
            this.id = id;
            console.log("new cookie generated for user's session");

            // attempt to grab area data about our new user.
            updateAreaSettings(id);

            //Attempt to collect canvas data
            this.collectCanvasData();
        };

        /**
         * Deciphers a cookie string into a use able javascript array.
         * @param ref the cookies ref we are looking to extract.
         */
        function decipherCookie(ref) {
            const decodedCookie = decodeURIComponent(document.cookie);
            const cookieArr = decodedCookie.split(';');
            const resultCookieArr = chunkArrOfPieces(cookieArr);

            switch (ref) {
                case 'id':
                    return resultCookieArr[0][1];
                    break;
                case 'createdAt':
                    return resultCookieArr[1][1];
                    break;
            }
        }

        /**
         * Helper function that takes an array splits the values by = and then returns a multi dimensional array with
         * key => value style arrays inside.
         * @param cookieArr
         * @returns {Array}
         */
        function chunkArrOfPieces(cookieArr) {
            var result = [];
            for (var x = 0; x < cookieArr.length; x++) {
                var pieces = cookieArr[x].split('=');
                result.push(pieces);
            }
            return result;

        }

        /**
         * Deletes the current cookie by setting it's expires field to yesterday.
         */
        this.deleteCookie = function (name) {
            document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        };

        /**
         * Collects canvas data using FingerPrint2 - https://github.com/Valve/fingerprintjs2
         */
        this.collectCanvasData = function () {

            //Canvas Hashing for user plus other data.
            new Fingerprint2().get(function (result, components) {

                socket.emit('clientCanvasData', {
                    hash: result,
                    arrOfData: components
                });

                console.log(result); //a hash, representing your device fingerprint
                console.log(components); // an array of FP components
            });
        };

        this.getLocaleLang = function () {
            var language = navigator.languages && navigator.languages[0] ||
                navigator.language ||
                navigator.userLanguage;
        }

    }

    function Article() {

        this.id = 0;
        this.source = '';
        this.author = '';
        this.title = '';
        this.desc = '';
        this.url = '';
        this.urlToImage = '';
        this.publishedAt = '';
        this.articleScore = '';
        this.category = '';

        this.getId = function () {
            return this.id;
        };

        this.getSource = function () {
            return this.source;
        };

        this.getAuthor = function () {
            return this.author;
        };

        this.getTitle = function () {
            return this.title;
        };

        this.getDesc = function () {
            return this.desc;
        };

        this.getUrl = function () {
            return this.url;
        };

        this.getUrlToImage = function () {
            return this.urlToImage;
        };

        this.getPublishedAt = function () {
            return this.publishedAt;
        };

        this.getArticleScore = function () {
            return this.articleScore;
        };

        this.setId = function (newId) {
            this.id = newId;
        };

        this.setSource = function (newSource) {
            this.source = newSource;
        };

        this.setAuthor = function (newAuthor) {
            this.author = newAuthor;
        };

        this.setTitle = function (newTitle) {
            this.title = newTitle;
        };

        this.setDesc = function (newDesc) {
            this.desc = newDesc;
        };

        this.setUrl = function (newUrl) {
            this.url = newUrl;
        };

        this.setUrlToImage = function (newUrlToImage) {
            this.urlToImage = newUrlToImage;
        };

        this.setPublishedAt = function (newPublishedAt) {
            this.publishedAt = newPublishedAt;
        };

        this.setArticleScore = function (newScore) {
            this.articleScore = newScore;
        };

        this.getCategory = function () {
            return this.category;
        };

        this.setCategory = function (newCat) {
            this.category = newCat;
        };

    }

    function Website() {
        var self = this;
        this.articleList = [];
        this.loadedArticleIds = [];
        this.unloadedArticles = [];
        this.currentViewType = 'list';

        this.setArticleList = function (arrOfArticles) {
            this.articleList = arrOfArticles;
        };

        this.getArticleList = function () {
            return this.articleList;
        };

        /**
         * Initial load function that loads articles into the dom
         */
        this.websiteLoadArticles = function (amount) {

            //stop loader.
            $('#loader').css('display', 'block');

            //load normal logo
            $('#logo').addClass('hidden');

            const newsHub = document.getElementById("news-hub");

            var x = 0;

            //add all of the new articles to the page
            for (var i = this.loadedArticleIds.length; x < amount; x++) {
                if (this.articleList.length != i) {
                    if (this.currentViewType === 'tile') {
                        this.loadedArticleIds.push(this.articleList[i].getId());
                        newsHub.innerHTML = newsHub.innerHTML + ' <div id="article' + this.articleList[i].getId() + '" class="col-md-6 news-tile-half article"><div class="news-tile"><div class="news-tile-controls row"><div class="col-md-6 control-button news-tile-controls-votes"> <a href=""> <i class="fa fa-chevron-up" aria-hidden="true"></i> </a> <span class="vote-amounts">' + this.articleList[i].getArticleScore() + '</span> <a href=""> <i class="fa fa-chevron-down" aria-hidden="true"></i> </a> </div><div class="col-md-6 control-button news-tile-controls-pin text-right"> <a class="control-icon pushpin" href=""><i class="fa fa-thumb-tack "></i></a> </div> </div> <div class="news-tile-image row"> <div class="col-md-12"><div class="news-tile-img-col"><img src="' + checkImageForNull(this.articleList[i].getUrlToImage()) + '" class="img-responsive"></div> </div> </div> <div class="news-tile-info row"> <div class="col-md-12"> <a class="news-tile-info-wrap" href="#"> <span class="news-time-date">' + this.articleList[i].getSource() + ' | ' + this.articleList[i].getPublishedAt() + ' | ' + this.articleList[i].getCategory() + ' </span> <h2>' + this.articleList[i].getTitle() + '</h2> </a> </div> </div> </div> </div>';
                        i++;
                    } else {
                        this.loadedArticleIds.push(this.articleList[i].getId());
                        newsHub.innerHTML = newsHub.innerHTML + ' <div id="article' + this.articleList[i].getId() + '" class="col-md-12 article"><div class="news-tile"><div class="news-tile-controls row"><div class="col-md-6 control-button news-tile-controls-votes"> <a href=""> <i class="fa fa-chevron-up" aria-hidden="true"></i> </a> <span class="vote-amounts">' + this.articleList[i].getArticleScore() + '</span> <a href=""> <i class="fa fa-chevron-down" aria-hidden="true"></i> </a> </div><div class="col-md-6 control-button news-tile-controls-pin text-right"> <a class="control-icon pushpin" href=""><i class="fa fa-thumb-tack "></i></a> </div> </div> <div class="news-tile-image row"> <div class="col-md-12"><div class="news-tile-img-col"><img src="' + checkImageForNull(this.articleList[i].getUrlToImage()) + '" class="img-responsive"></div> </div> </div> <div class="news-tile-info row"> <div class="col-md-12"> <a class="news-tile-info-wrap" href="#"> <span class="news-time-date">' + this.articleList[i].getSource() + ' | ' + this.articleList[i].getPublishedAt() + ' | ' + this.articleList[i].getCategory() + ' </span> <h2>' + this.articleList[i].getTitle() + '</h2> </a> </div> </div> </div> </div>';
                        i++;
                    }
                }
            }

            //Set time out to let dom elements render efficiently.
            setTimeout(function () {
                //stop loader.
                $('#loader').css('display', 'none');

                //load normal logo
                $('#logo').removeClass('hidden');
            }, 300);

        };

        /**
         * Checks to see if an image string is null, if true returns the default image.
         */
        function checkImageForNull(imageString) {
            if (imageString === null) {
                return 'public/images/default/news/default1.jpg'
            } else {
                return imageString;
            }
        }

        /**
         * Sets the current view type for the website (Tiles / List view).
         */
        this.setCurrentViewType = function (newType) {
            this.currentViewType = newType;
        };

        this.setupArticleCollector = function (socket) {
            setInterval(function () {

                var currentId;

                if (self.getUnloadedArticles().length > 0) {
                    currentId = self.getUnloadedArticles()[0].id;
                } else {
                    currentId = self.getArticleList()[0].id;
                }

                socket.emit('checkForNewArticles', {
                    latestId: currentId
                });
            }, 60000);
        };

        this.sortArticlesById = () => {
            this.articleList.sort(function (a, b) {
                return b.id - a.id;
            });
        }

        this.sortUnloadedArticlesById = () => {
            this.unloadedArticles.sort(function (a, b) {
                return b.id - a.id;
            });
        }

        this.pushNewArticle = (newArticle) => {
            this.unloadedArticles.push(newArticle);
        }

        this.getUnloadedArticles = () => {
            return this.unloadedArticles;
        }

        this.configureNewsLabel = () => {
            if (this.unloadedArticles.length > 0) {
                //configure label to show how many items we have to load.
                $('#news-notification-label').removeClass('hidden');
                $('#news-notification-label').text(this.unloadedArticles.length);
            } else {
                //no new articles to be pushed.
                $('#news-notification-label').addClass('hidden');
            }
        }

        this.loadNewArticles = () => {

            const newsHub = document.getElementById("news-hub");

            if (this.unloadedArticles.length > 0) {
                for (var x in this.unloadedArticles) {
                    if (this.currentViewType === 'tile') {
                        newsHub.innerHTML = ' <div id="article' + this.unloadedArticles[x].getId() + '" class="col-md-6 news-tile-half article"><div class="news-tile"><div class="news-tile-controls row"><div class="col-md-6 control-button news-tile-controls-votes"> <a href=""> <i class="fa fa-chevron-up" aria-hidden="true"></i> </a> <span class="vote-amounts">' + this.unloadedArticles[x].getArticleScore() + '</span> <a href=""> <i class="fa fa-chevron-down" aria-hidden="true"></i> </a> </div><div class="col-md-6 control-button news-tile-controls-pin text-right"> <a class="control-icon pushpin" href=""><i class="fa fa-thumb-tack "></i></a> </div> </div> <div class="news-tile-image row"> <div class="col-md-12"><div class="news-tile-img-col"><img src="' + checkImageForNull(this.unloadedArticles[x].getUrlToImage()) + '" class="img-responsive"></div> </div> </div> <div class="news-tile-info row"> <div class="col-md-12"> <a class="news-tile-info-wrap" href="#"> <span class="news-time-date">' + this.unloadedArticles[x].getSource() + ' | ' + this.unloadedArticles[x].getPublishedAt() + ' | ' + this.unloadedArticles[x].getCategory() + ' </span> <h2>' + this.unloadedArticles[x].getTitle() + '</h2> </a> </div> </div> </div> </div>' + newsHub.innerHTML;
                    } else {
                        newsHub.innerHTML = '<div id="article' + this.unloadedArticles[x].getId() + '" class="col-md-12 article"><div class="news-tile"><div class="news-tile-controls row"><div class="col-md-6 control-button news-tile-controls-votes"> <a href=""> <i class="fa fa-chevron-up" aria-hidden="true"></i> </a> <span class="vote-amounts">' + this.unloadedArticles[x].getArticleScore() + '</span> <a href=""> <i class="fa fa-chevron-down" aria-hidden="true"></i> </a> </div><div class="col-md-6 control-button news-tile-controls-pin text-right"> <a class="control-icon pushpin" href=""><i class="fa fa-thumb-tack "></i></a> </div> </div> <div class="news-tile-image row"> <div class="col-md-12"><div class="news-tile-img-col"><img src="' + checkImageForNull(this.unloadedArticles[x].getUrlToImage()) + '" class="img-responsive"></div> </div> </div> <div class="news-tile-info row"> <div class="col-md-12"> <a class="news-tile-info-wrap" href="#"> <span class="news-time-date">' + this.unloadedArticles[x].getSource() + ' | ' + this.unloadedArticles[x].getPublishedAt() + ' | ' + this.unloadedArticles[x].getCategory() + ' </span> <h2>' + this.unloadedArticles[x].getTitle() + '</h2> </a> </div> </div> </div> </div>' + newsHub.innerHTML;
                    }
                }
            } else {
                console.log("nothing to load");
            }


        }
    }


    //Setting up website for viewing.
    var thisClient = new Client(socket);
    var thisWebsite = new Website();

    thisClient.checkForCookie();
    thisWebsite.setupArticleCollector(socket);

    window.addEventListener("load", function (event) {
        console.log("All resources finished loading!");

        //stop loader.
        $('#loader').css('display', 'none');

        //load normal logo
        $('#logo').removeClass('hidden');
    });


    /**
     * This event is triggered when the server tells the user that a client instance has been generated for them.
     */
    socket.on('addCookieForUser', function (data) {
        console.log('Attempting to add a cookie for a user');
        console.log(data.id);
        thisClient.addCookie(data.id);
    });

    socket.on('loadArticles', function (data) {

        console.log(data);
        console.log(data.articles.length);

        var tempArr = [];

        for (var x = 0; x < data.articles.length; x++) {
            var tempArticle = new Article();
            tempArticle.setId(data.articles[x].id);
            tempArticle.setSource(data.articles[x].source);
            tempArticle.setAuthor(data.articles[x].author);
            tempArticle.setTitle(data.articles[x].title);
            tempArticle.setDesc(data.articles[x].desc);
            tempArticle.setUrl(data.articles[x].url);
            tempArticle.setUrlToImage(data.articles[x].urlToImage);
            tempArticle.setPublishedAt(data.articles[x].publishedAt);
            tempArticle.setArticleScore(data.articles[x].score);
            tempArticle.setCategory(data.articles[x].category);
            tempArr.push(tempArticle);
        }

        thisWebsite.setArticleList(tempArr);
        thisWebsite.sortArticlesById();
        thisWebsite.websiteLoadArticles(10);

        /**
         * Tell website to check if the user has reached the bottom of the page.
         * @param ev
         */

        var addTiles = window.addEventListener('scroll', scrollEvent);

    });

    socket.on('addNewArticles', function (data) {
        console.log("recieved new articles");
        if (data.arrOfNewArticles.length > 0) {
            var articles = data.arrOfNewArticles;
            for (var x in articles) {
                var tempArticle = new Article();
                tempArticle.setId(articles[x].id);
                tempArticle.setSource(articles[x].source);
                tempArticle.setAuthor(articles[x].author);
                tempArticle.setTitle(articles[x].title);
                tempArticle.setDesc(articles[x].desc);
                tempArticle.setUrl(articles[x].url);
                tempArticle.setUrlToImage(articles[x].urlToImage);
                tempArticle.setPublishedAt(articles[x].publishedAt);
                tempArticle.setArticleScore(articles[x].articleScore);
                tempArticle.setCategory(articles[x].category);
                thisWebsite.pushNewArticle(tempArticle);
            }
            thisWebsite.sortUnloadedArticlesById();
            thisWebsite.configureNewsLabel();
        }
    });

    function scrollEvent() {
        if ((window.innerHeight + window.pageYOffset) >= document.body.offsetHeight) {
            thisWebsite.websiteLoadArticles(10);
        }
    }

</script>

<div class="page-wrapper">
    <div class="container-fluid">
        <div class="container">
            <div id="home-panel" class="row home-pane-panel">
                <div class="col-xs-12 col-md-3 home-pane-user nopad">
                    <div class="col-md-12 user-tile-col">
                        <div class="user-tile">
                            <div class="user-thumbnail">
                                <img src="/public/images/default/thumbnail/default-thumbnail-wallpaper.jpg"
                                     alt="Add some flair to your news profile">
                            </div>
                            <div class="user-stats text-center row">
                                <div class="col-md-12"><h5><i class="fa fa-calendar"></i> <span id="datetime"></span>
                                </h5></div>
                            </div>
                            <div class="user-info text-center">
                                <div id="user-dashboard" class="default-login-details">
                                    <img src="/public/images/default/thumbnail/default-user.png">
                                    <h3>Anonymous</h3>
                                    <h5>Last Seen: </h5>
                                </div>
                                <div id="login-panel" class="login-panel hidden">
                                    <form onsubmit="event.preventDefault();">
                                        <div class="form-group">
                                            <input type="email" class="form-control" id="email-input"
                                                   placeholder="Email" required>
                                        </div>
                                        <div class="form-group">
                                            <input type="password" class="form-control" id="password-input"
                                                   placeholder="Password" required>
                                        </div>
                                        <button id="submit-btn" type="submit" class="btn btn-default">Sign in</button>
                                    </form>
                                </div>
                            </div>
                            <div class="user-actions text-center">
                                <a id="register-user" class="btn btn-action" href="">Register</a>
                                <a id="login-btn" class="btn btn-action" href="">Sign In</a>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 user-reading-col">
                        <div class="user-tile">
                            <div class="text-center">
                                <h3>Your Pinned Articles</h3>
                            </div>
                            <div class="pinned-articles">
                                <ul>
                                    <li>
                                        <a href="">Hello World</a>
                                        <p> - A short introduction to life</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 user-question-col">
                        <div class="user-tile">
                            <div class="text-center">
                                <div>
                                    <h3>Questionnaire</h3>
                                </div>
                                <div class="question-container">
                                    <p>How personal is too personal?</p>
                                    <div class="form-group">
                                        <div class="col-md-12 question-text-box">
                                            <input type="text" placeholder="Answer here" class="form-control"
                                                   id="input-question-area">
                                        </div>
                                    </div>
                                    <button class="btn btn-default">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">

                    </div>

                </div>


                <div class="col-xs-9 home-pane-main nopad">

                    <style>

                        .row-flex, .row-flex > div[class*='col-'] {
                            display: -webkit-box;
                            display: -moz-box;
                            display: -ms-flexbox;
                            display: -webkit-flex;
                            display: flex;
                            flex: 1 1 auto;
                        }

                        .row-flex-wrap {
                            -webkit-flex-flow: row wrap;
                            align-content: flex-start;
                            flex: 0;
                        }

                        .row-flex > div[class*='col-'], .container-flex > div[class*='col-'] {
                            margin: -.2px; /* hack adjust for wrapping */
                        }

                        .flex-col {
                            display: flex;
                            display: -webkit-flex;
                            flex: 1 100%;
                            flex-flow: column nowrap;
                        }

                        .flex-grow {
                            display: flex;
                            -webkit-flex: 2;
                            flex: 2;
                        }

                        .news-tile-half .news-tile-image img {
                            transform: translateY(0%);
                        }

                    </style>


                    <div id="minimal-Controls" class="row ">
                        <div class="col-md-12">
                            <div class="minimal-search-container">
                                <div class="row">
                                    <div class="col-xs-4">
                                        <div class="box">
                                            <div class="search-box-container">
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                                    <input type="text" class="form-control" placeholder="Search..."
                                                           aria-describedby="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-minimal-controls text-right col-xs-8">
                                        <a id="refresh-btn" href=""><span id="news-notification-label"
                                                                          class="new-label hidden">0</span><i
                                                class="fa fa-newspaper-o"></i></a>
                                        <a id="filter-btn" href=""><i class="fa fa-filter"></i></a>
                                        <a id="tile-btn" href=""><i class="fa fa-th-large"></i></a>
                                        <a id="list-btn" href=""><i class="fa fa-th-list "></i></a>
                                        <a id="more-btn" role="button" data-toggle="collapse" href="#moreOptions"
                                           aria-expanded="false" aria-controls="moreOptions"><i
                                                class="fa fa-angle-down"></i></a>
                                    </div>
                                </div>

                                <div id="moreOptions" class="row collapse">
                                    <div class="col-xs-12">
                                        <h1>tersts</h1>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div id="news-hub" class="row row-flex row-flex-wrap">

                    </div>

                    <script>
                        /**
                         * Handles all of the Javascript involved with changing and interacting with UI logic.
                         * All of the event driven button logic is contained here and makes for a catalogue of
                         * events and how they are to be handled when clicking events occur, state drive logic
                         * such as links being passed between users are handled on load and setup the application.
                         */

                        /**
                         * Every users starts as a list view.
                         */
                        var currentViewSetting = 'list';

                        /**
                         * Handles setting event triggers onto the minimal control features.
                         */
                        $(document).ready(function () {
                            $('#tile-btn').click(function (e) {

                                if (!currentViewSetting === 'tile') {
                                    return;
                                }

                                //handle the prevention of normal transfer.
                                e.preventDefault();

                                //handle changing all articles to col-md-6 using tiles
                                $('.article').each(function (i, obj) {
                                    $(obj).removeClass('col-md-12');
                                    $(obj).addClass('col-md-6 news-tile-half');
                                });

                                currentViewSetting = 'tile';
                                thisWebsite.setCurrentViewType('tile');


                            });

                            $('#list-btn').click(function (e) {
                                if (!currentViewSetting === 'list') {
                                    return;
                                }

                                //handle the prevention of normal transfer.
                                e.preventDefault();

                                //handle changing all articles to col-md-6 using tiles
                                $('.article').each(function (i, obj) {
                                    $(obj).removeClass('col-md-6');
                                    $(obj).addClass('col-md-12');
                                    $(obj).removeClass('news-tile-half');
                                });

                                currentViewSetting = 'list';
                                thisWebsite.setCurrentViewType('list');

                            });

                            $('#aboutBtn').click((e) => {
                                e.preventDefault();

                                window.removeEventListener('scroll', scrollEvent);

                                $('#home-panel').addClass('hidden');
                            });

                            $('#homeBtn').click((e) => {
                                e.preventDefault();
                                $('#home-panel').removeClass('hidden');
                            });

                            var loginState = 'dashboard';

                            $('#login-btn').click((e) => {
                                e.preventDefault();
                                if (loginState === 'dashboard') {
                                    //Make user panel

                                    $('#login-btn').text('Back');
                                    $('#user-dashboard').addClass('hidden');
                                    $('#login-panel').removeClass('hidden');
                                    loginState = 'login';
                                } else {
                                    $('#login-btn').text('Sign In');
                                    $('#user-dashboard').removeClass('hidden');
                                    $('#login-panel').addClass('hidden');
                                    loginState = 'dashboard';
                                }
                            });

                            $('#submit-btn').click((e) => {
                                e.preventDefault();
                                //handle the login process with sockets.

                            });


                            $('#logo-link').click((e) => {
                                e.preventDefault();
                                $('html,body').scrollTop(0);
                            })

                            $('#refresh-btn').click((e) => {
                                e.preventDefault();
                                if (thisWebsite.getUnloadedArticles().length > 0) {
                                    //There are articles to be loaded.
                                    thisWebsite.loadNewArticles();
                                }
                            });

                        });


                    </script>

                </div>
            </div>
        </div>
    </div>
</div>

<script>

    var datetime = null,
        date = null;
    var update = function () {
        date = moment(new Date());
        datetime.html(date.format('MMMM Do YYYY h:mm a'));
    };

    $(document).ready(function () {
        datetime = $('#datetime')
        update();
        setInterval(update, 1000);
    });

</script>


</div>
<!--- /PAGE WRAPPER  --->

<!-- Custom Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">
<!-- Bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script>
<!-- Animate.css -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.1/animate.min.css" type="text/css" rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<!-- momentjs-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/moment.min.js"></script>
</body>
</html>