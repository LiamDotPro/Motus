<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
          content="Motus is a news sharing website that personalises itself to the user not the audience.">
    <meta property="og:description"
          content="Motus is a news sharing website that personalises itself to the user not the audience."/>
    <meta property="og:image" content="preview.jpg"/>
    <meta name="author" content="Liam Read">
    <link rel="icon" type="image/png" href="/favicon.png">

    <!-- Custom Meta title tags -->
    <meta property="og:title" content="Motus - Very Personal News"/>
    <title>Motus</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" type="text/css" rel="stylesheet">
    <link href="/public/css/style.css" rel="stylesheet">
    <!--[if lt IE 9]>
    <script src="http://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="http://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/list.js/1.1.0/list.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fingerprintjs2/1.5.0/fingerprint2.min.js"></script>
    <script src="/public/js/Website.js"></script>
    <script src="/public/js/Client.js"></script>
    <script src="/public/js/Article.js"></script>
    <script src="/public/js/User.js"></script>
</head>
<body>

<div id="alert-div">

</div>

<header class="header-sticky">
    <nav class="navbar navbar-lg main-navbar" role="navigation" id="top-navigation">
        <div class="container nopad">
            <div class="row">
                <!-- Mobile Only -->
                <div class="navbar-header">
                    <a id="logo-link" class="brand" style="margin: 0; float: none;" href="/home">
                        <div id="loader" class="loader">Loading...</div>
                        <img id="logo" class="hidden" src="/public/images/logos/logo.png"/>
                    </a>
                    <!--                            <img src="/images/logos/logo.png" class="img-responsive pull-left logo-xs" alt="logo here">-->
                    <button type="button" class="navbar-toggle pull-right">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="nav-menu-line"></span>
                        <span class="nav-menu-line"></span>
                        <span class="nav-menu-line"></span>
                    </button>
                </div>
                <!-- Main Navigation -->
                <div class="collapse navbar-collapse">
                    <ul class="nav main-links navbar-nav navbar-left">
                        <li><a id="homeBtn" href="/home">Home</a></li>
                        <li><a id="trendsBtn" href="/trends">Trends</a></li>
                        <li><a id="missonBtn" href="/mission">Mission Statement</a></li>
                    </ul>
                    <ul class="nav social-links navbar-nav navbar-right">
                        <li><a target="_blank" class="facebook" href=""><i class="fa fa-facebook"></i></a></li>
                        <li><a target="_blank" class="twitter" href=""><i class="fa fa-twitter"></i></a></li>
                        <li><a target="_blank" class="linkedin" href=""><i class="fa fa-linkedin"></i></a></li>
                        <li><a class="toggle" href=""><i id="inverseToggle" class="fa fa-toggle-on"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
</header>

<script>
    var socket = io();

    //Setting up website for viewing.
    var thisClient = new Client(socket);
    var thisWebsite = new Website();

    //    thisClient.deleteCookie('id');
    //    thisClient.deleteCookie('createdAt');
    console.log(document.cookie);

    thisClient.checkForCookie();
    thisWebsite.setupArticleCollector(socket);


    //Self executing annoymous function used as a loader.
    (() => {

        var path = window.location.pathname.toLowerCase();

        if (!path.includes("/article/")) {
            switch (path) {
                case"/":
                    loadState('load');
                    readyHomePage();
                    break;

                case"/home":
                    loadState('load');
                    readyHomePage();
                    break;

                case "/trends":
                    loadState('silent');
                    break;

                case "/mission":
                    loadState('silent');
                    break;

                default:
                    loadState('load');
                    readyHomePage();
                    break;
            }
        } else {
           console.log("Article Link Found");
           

        }

        /***
         * Based on the state that is passed we asses if we should load the articles and write them quitely or normally.
         */
        function loadState(type) {
            if (type === 'silent') {
                //silent load
                socket.emit("websiteLoad", {
                    type: type
                })
            } else if (type === 'load') {
                //normal load
                socket.emit("websiteLoad", {
                    type: type
                })
            } else {
                console.log("Unexspected load state specfied.");
            }
        }

        function readyHomePage() {
            $(document).ready(() => {
                $('#loading-div').removeClass('hidden');
                $('#minimal-Controls').removeClass('hidden');
                $('#news-hub').removeClass('hidden');

                //Create Scrolling event to later be cancelled.
                window.addEventListener('scroll', scrollEvent);

                thisWebsite.setScrolling(true);
            });
        }

        //logging
        console.log("path: " + path);
    })();

    window.addEventListener("load", function (event) {
        console.log("All resources finished loading!");

        //stop loader.
        $('#loader').css('display', 'none');

        //load normal logo
        $('#logo').removeClass('hidden');
    });


    /**
     * This event is triggered when the server tells the user that a client instance has been generated for them.
     */
    socket.on('addCookieForUser', function (data) {
        console.log('Attempting to add a cookie for a user');
        console.log(data.id);
        thisClient.addCookie(data.id);
    });

    socket.on('loadArticles', function (data) {

        console.log(data);

        var tempArr = [];

        for (var x = 0; x < data.articles.length; x++) {
            var tempArticle = new Article();
            tempArticle.setId(data.articles[x].id);
            tempArticle.setSource(data.articles[x].source);
            tempArticle.setAuthor(data.articles[x].author);
            tempArticle.setTitle(data.articles[x].title);
            tempArticle.setDesc(data.articles[x].desc);
            tempArticle.setUrl(data.articles[x].url);
            tempArticle.setUrlToImage(data.articles[x].urlToImage);
            tempArticle.setPublishedAt(formatDate(data.articles[x].publishedAt));
            tempArticle.setArticleScore(data.articles[x].score);
            tempArticle.setCategory(data.articles[x].category);
            tempArticle.setWebSafeLink(data.articles[x].webSafeLink);
            tempArr.push(tempArticle);
        }

        function formatDate(str) {
            return moment(str).format("Do MMMM YYYY, h:mm:ss a");
        }

        thisWebsite.setArticleList(tempArr);
        thisWebsite.sortArticlesById();


        if (data.type === 'load') {
            thisWebsite.websiteLoadArticles(10);

            /**
             * Tell website to check if the user has reached the bottom of the page.
             * @param ev
             */
            var addTiles = window.addEventListener('scroll', scrollEvent);
        }


    });

    socket.on('addNewArticles', function (data) {
        console.log("recieved new articles");
        if (data.arrOfNewArticles.length > 0) {
            var articles = data.arrOfNewArticles;
            for (var x in articles) {
                var tempArticle = new Article();
                tempArticle.setId(articles[x].id);
                tempArticle.setSource(articles[x].source);
                tempArticle.setAuthor(articles[x].author);
                tempArticle.setTitle(articles[x].title);
                tempArticle.setDesc(articles[x].desc);
                tempArticle.setUrl(articles[x].url);
                tempArticle.setUrlToImage(articles[x].urlToImage);
                tempArticle.setPublishedAt(formatDate(articles[x].publishedAt));
                tempArticle.setArticleScore(articles[x].articleScore);
                tempArticle.setCategory(articles[x].category);
                tempArticle.setWebSafeLink(articles[x].websafelink);
                thisWebsite.pushNewArticle(tempArticle);
            }
            thisWebsite.sortUnloadedArticlesById();
            thisWebsite.configureNewsLabel();
        }

        function formatDate(str) {
            return moment(str).format("Do MMMM YYYY, h:mm:ss a");
        }
    });

    /**
     * Triggered when a successful login has been processed.
     */
    socket.on('successfulLogin', (data) => {

        $('#login-btn').addClass('hidden');
        $('#login-panel').addClass('hidden');
        $('#register-user').addClass('hidden');
        $('#user-dashboard').removeClass('hidden');
        $('#logout-btn').removeClass('hidden');

        if (data.user.admin) {
            $('#dashboard-btn').removeClass('hidden');
        }

        //adding the users email as a form of identifcation to the cookie.
        thisClient.addUserDetailsToCookie(data.email);
        thisClient.setUser(data.user);

        console.log(thisClient.getUser());
        console.log(document.cookie);

        $('#pinlist').removeClass('hidden');
        $('#notLoggedInList').addClass('hidden');

        //appends existing saved articles to the list.
        thisClient.appendPinnedArticles();

    });

    socket.on('incorrectLogin', () => {
        var alertDiv = document.getElementById('alert-div');
        alertDiv.innerHTML = '<div class="alert alert-danger alert-dismissable animated fadeIn loginAlert">' +
            '<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>' +
            '<strong>Incorrect login try again!</strong> Attempt: 0' +
            '</div>';

    });

    function scrollEvent() {
        if ((window.innerHeight + window.pageYOffset) >= document.body.offsetHeight) {
            thisWebsite.websiteLoadArticles(10);
        }
    }

    /**
     * Recieves the user object from the server and appends it to the client.
     */
    socket.on('recUserObj', (data) => {
        thisClient.setUser(data.obj);

        console.log(thisClient.getUser().getId());

        console.log(thisClient.getUser());

        if (thisClient.getUser().getAdmin() === true) {
            $('#dashboard-btn').removeClass('hidden');
        }

        $(document).ready(() => {
            $('#pinlist').removeClass('hidden');
            $('#notLoggedInList').addClass('hidden');
        });

        //appends existing saved articles to the list.
        thisClient.appendPinnedArticles();


    });

    /**
     * Handles all of the Javascript involved with changing and interacting with UI logic.
     * All of the event driven button logic is contained here and makes for a catalogue of
     * events and how they are to be handled when clicking events occur, state drive logic
     * such as links being passed between users are handled on load and setup the application.
     */

    /**
     * Every users starts as a list view.
     */
    var currentViewSetting = 'list';
    var scrollTop = 0;


    /**
     * Handles setting event triggers onto the minimal control features.
     */
    $(document).ready(function () {
        $('#tile-btn').click(function (e) {

            if (!currentViewSetting === 'tile') {
                return;
            }

            //handle the prevention of normal transfer.
            e.preventDefault();

            //handle changing all articles to col-md-6 using tiles
            $('.article').each(function (i, obj) {
                $(obj).removeClass('col-md-12');
                $(obj).addClass('col-md-6 news-tile-half');
            });

            currentViewSetting = 'tile';
            thisWebsite.setCurrentViewType('tile');


        });

        $(document).on('click', '#backToArticlesBtn', function (e) {
            //push state
            var stateObj = {previousLoc: window.location.pathname};
            history.pushState(stateObj, "home page", "/home");

            //Actions to take below
            e.preventDefault();
            $('#minimal-Controls').removeClass('hidden');
            $('#news-hub').removeClass('hidden');
            $('#article-hub').addClass('hidden');

            $(window).scrollTop(scrollTop);


            if (thisWebsite.getScrolling() === false) {
                //no scrolling currently attached.
                window.addEventListener('scroll', scrollEvent);
                thisWebsite.setScrolling(true);
            }

            if (thisWebsite.loadedArticleIds.length === 0) {
                thisWebsite.websiteLoadArticles(10);
            }
        });


        $('#list-btn').click(function (e) {
            if (!currentViewSetting === 'list') {
                return;
            }

            //handle the prevention of normal transfer.
            e.preventDefault();

            //handle changing all articles to col-md-6 using tiles
            $('.article').each(function (i, obj) {
                $(obj).removeClass('col-md-6');
                $(obj).addClass('col-md-12');
                $(obj).removeClass('news-tile-half');

            });

            currentViewSetting = 'list';
            thisWebsite.setCurrentViewType('list');

        });

        $('#trendsBtn').click((e) => {


        });

        $('#homeBtn').click((e) => {
            //push state
            var stateObj = {previousLoc: window.location.pathname};
            history.pushState(stateObj, "home page", "/home");

            //Actions to take below
            e.preventDefault();
            $('#minimal-Controls').removeClass('hidden');
            $('#news-hub').removeClass('hidden');
            $('#article-hub').addClass('hidden');

            if (thisWebsite.getScrolling() === false) {
                //no scrolling currently attached.
                window.addEventListener('scroll', scrollEvent);
            }

            if (thisWebsite.loadedArticleIds.length === 0) {
                thisWebsite.websiteLoadArticles(10);
            }

            thisWebsite.setScrolling(true);


        });

        var loginState = 'dashboard';

        $('#login-btn').click((e) => {
            e.preventDefault();
            if (loginState === 'dashboard') {
                //Make user panel

                $('#login-btn').text('Back');
                $('#user-dashboard').addClass('hidden');
                $('#login-panel').removeClass('hidden');
                loginState = 'login';
            } else {
                $('#login-btn').text('Sign In');
                $('#user-dashboard').removeClass('hidden');
                $('#login-panel').addClass('hidden');
                loginState = 'dashboard';
            }
        });

        $('#submit-btn').click((e) => {
            e.preventDefault();
            //handle the login process with sockets.
            console.log("attempting to login");
            socket.emit('loginAttempt', {
                email: $('#email-input').val(),
                password: $('#password-input').val()
            });

        });


        $('#logo-link').click((e) => {
            e.preventDefault();
            $('html,body').scrollTop(0);
        });

        $('#refresh-btn').click((e) => {
            e.preventDefault();
            if (thisWebsite.getUnloadedArticles().length > 0) {
                //There are articles to be loaded.
                thisWebsite.loadNewArticles();
            }
        });

        //programtic handling of click event on articles
        $(document).on('click', '.article-link', (e) => {

            //grab scroll bar height first
            scrollTop = $(window).scrollTop();

            $(window).scrollTop(0);

            e.preventDefault();

            var link = $(e.target).parent().attr("href");
            var article = thisWebsite.getArticleByName(link);

            if (article === false) {
                console.log(thisWebsite.getArticleList());
            }

            //set history state object
            var stateObj = {previousLoc: window.location.pathname};
            history.pushState(stateObj, "trends page", "/article/" + link);

            //remove scrolling
            if (thisWebsite.getScrolling() === true) {
                //no scrolling currently attached.
                window.removeEventListener('scroll', scrollEvent);
            }

            thisWebsite.setScrolling(false);

            //build article stub
            var articleHub = document.getElementById('article-hub');
            articleHub.innerHTML = '<div id="aticle-holder"><div class="col-md-12 article-way-back-section"><a id="backToArticlesBtn" href="/home"><i class="fa fa-arrow-left"></i> Back to Articles</a><a id="articleTackBtn" class="pull-right" href=""><i class="fa fa-thumb-tack"></i></a></div><div class="col-md-12 nopad"><img src="' + article.getUrlToImage() + '"' + 'class="img-responsive article-full-image"></div><div class="article-page col-md-12 text-center"><div class="article-page-minimal-controls"><a href=""><i class="fa fa-twitter"></i></a><a href=""><i class="fa fa-facebook"></i></a><a href=""><i class="fa fa-google-plus"></i></a><a href=""><i class="fa fa-reddit"></i></a></div><div class="article-page-info"><p>' + article.getAuthor() + ' | ' + article.getSource() + ' | ' + article.getPublishedAt() + ' | ' + article.getCategory() + '</p></div><h1>' + article.getTitle() + '</h1><h2>' + article.getDesc() + '</h2><div class="article-page-link"><a id="articleViewBtn" href="' + article.getUrl() + '" target="_blank"><i class="fa fa-link"></i>View Full Article Here</a></div></div></div>';

            $('#news-hub').addClass('hidden');
            $('#minimal-Controls').addClass('hidden');
            $('#article-hub').removeClass('hidden');

        });

        //handles pinning of articles to the list of pinned articles
        $(document).on('click', '.pushpin', (e) => {
            e.preventDefault();

            var article = thisWebsite.getArticleById(e.target.id);


            if (thisClient.getUser() !== null) {
                if (thisClient.checkPinnedStatus(e.target.id)) {
                    console.log("Adding pinned article");
                    thisClient.addPinnedArticleToUser(article);
                    thisWebsite.addPinnedArticleToList(article);
                }
            } else {
                console.log("User not logged in");
            }


        });

        $(document).on('click', '#logout-btn', (e) => {
            e.preventDefault();

            //remove user privs
            thisClient.deleteCookie('user');

            loginState = 'dashboard';

            $('#logout-btn').addClass('hidden');
            $('#login-btn').text("Sign In");
            $('#login-btn').removeClass('hidden');
            $('#register-user').removeClass('hidden');
            $('#dashboard-btn').addClass('hidden');

            $('#pinlist').addClass('hidden');
            $('#notLoggedInList').removeClass('hidden');

            $('#pinlist-ul').empty();

        });

    });


</script>

<div class="page-wrapper">
    <div class="container-fluid">
        <div class="container">
            <div id="home-panel" class="row home-pane-panel">
                <div class="col-xs-12 col-md-3 home-pane-user nopad">
                    <div class="col-md-12 user-tile-col">
                        <div class="user-tile">
                            <div class="user-thumbnail">
                                <img src="/public/images/default/thumbnail/default-thumbnail-wallpaper.jpg"
                                     alt="Add some flair to your news profile">
                            </div>
                            <div class="user-stats text-center row">
                                <div class="col-md-12"><h5><i class="fa fa-calendar"></i> <span id="datetime"></span>
                                </h5></div>
                            </div>
                            <div class="user-info text-center">
                                <div id="user-dashboard" class="default-login-details">
                                    <img src="/public/images/default/thumbnail/default-user.png">
                                    <h3>Anonymous</h3>
                                    <h5>Last Seen: </h5>
                                </div>
                                <div id="login-panel" class="login-panel hidden">
                                    <form onsubmit="event.preventDefault();">
                                        <div class="form-group">
                                            <input type="email" class="form-control" id="email-input"
                                                   placeholder="Email" required>
                                        </div>
                                        <div class="form-group">
                                            <input type="password" class="form-control" id="password-input"
                                                   placeholder="Password" required>
                                        </div>
                                        <button id="submit-btn" type="submit" class="btn btn-default">Sign in</button>
                                    </form>
                                </div>
                            </div>
                            <div id="user-actions" class="user-actions text-center">
                                <a id="register-user" class="btn btn-action" href="/register">Register</a>
                                <a id="login-btn" class="btn btn-action" href="">Sign In</a>
                                <a id="dashboard-btn" class="btn btn-action hidden" href="/dashboard">Dashboard</a>
                                <a id="logout-btn" class="btn btn-action hidden" href="">Logout</a>
                            </div>
                        </div>
                    </div>

                    <style>

                        #notLoggedInList {
                            padding-top: 50px;
                        }

                        #notLoggedInList i {
                            font-size: 28px;
                            color: #ef242d;
                        }

                        #notLoggedInList h2 {
                            margin-top: 0;
                            font-size: 20px;
                        }
                    </style>

                    <div class="col-md-12 user-reading-col">
                        <div class="user-tile">
                            <div class="text-center">
                                <h3>Your Pinned Articles</h3>
                            </div>
                            <div class="pinned-articles">
                                <div id="pinlist" class="hidden">
                                    <ul id="pinlist-ul">

                                    </ul>
                                </div>
                                <div id="notLoggedInList" class="text-center">
                                    <i class="fa fa-thumb-tack"></i>
                                    <h2>Login or register to start collecting articles</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 user-question-col">
                        <div class="user-tile">
                            <div class="text-center">
                                <div>
                                    <h3>Trends</h3>
                                </div>
                                <div class="">

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12">

                    </div>

                </div>


                <div class="col-xs-9 home-pane-main nopad">
                    <style>
                        .row-flex, .row-flex > div[class*='col-'] {
                            display: -webkit-box;
                            display: -moz-box;
                            display: -ms-flexbox;
                            display: -webkit-flex;
                            display: flex;
                            flex: 1 1 auto;
                        }

                        .row-flex-wrap {
                            -webkit-flex-flow: row wrap;
                            align-content: flex-start;
                            flex: 0;
                        }

                        .row-flex > div[class*='col-'], .container-flex > div[class*='col-'] {
                            margin: -.2px; /* hack adjust for wrapping */
                        }

                        .flex-col {
                            display: flex;
                            display: -webkit-flex;
                            flex: 1 100%;
                            flex-flow: column nowrap;
                        }

                        .flex-grow {
                            display: flex;
                            -webkit-flex: 2;
                            flex: 2;
                        }

                        .news-tile-half .news-tile-image img {
                            transform: translateY(0%);
                        }
                    </style>

                    <div id="minimal-Controls" class="row hidden">
                        <div class="col-md-12">
                            <div class="minimal-search-container">
                                <div class="row">
                                    <div class="col-xs-4">
                                        <div class="box">
                                            <div class="search-box-container">
                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-search"></i></span>
                                                    <input type="text" class="form-control" placeholder="Search..."
                                                           aria-describedby="">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="right-minimal-controls text-right col-xs-8">
                                        <a id="refresh-btn" href=""><span id="news-notification-label"
                                                                          class="new-label hidden">0</span><i
                                                class="fa fa-newspaper-o"></i></a>
                                        <a id="filter-btn" href=""><i class="fa fa-filter"></i></a>
                                        <a id="tile-btn" href=""><i class="fa fa-th-large"></i></a>
                                        <a id="list-btn" href=""><i class="fa fa-th-list "></i></a>
                                        <a id="more-btn" role="button" data-toggle="collapse" href="#moreOptions"
                                           aria-expanded="false" aria-controls="moreOptions"><i
                                                class="fa fa-angle-down"></i></a>
                                    </div>
                                </div>

                                <div id="moreOptions" class="row collapse">
                                    <div class="col-xs-12">

                                        <div class="flex-grid">
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xs-12">
                                        <div class="flex-grid">
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                            <div class="col">
                                                <img class='img-responsive'
                                                     src="/public/images/default/news-sources/abc-news.png">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div id="news-hub" class="row row-flex row-flex-wrap hidden">

                    </div>

                    <div id="article-hub" class="hidden">

                    </div>

                    <div class="hidden" id="loading-div">
                        <div class="col-md-12 text-center">
                            <img style="opacity: 0.4;" src="/public/images/default/loading/break.png"/>
                            <h1 style="color:#dcdcdc;">Grabbing the latest news off the press...</h1>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script>

    var datetime = null,
        date = null;
    var update = function () {
        date = moment(new Date());
        datetime.html(date.format('MMMM Do YYYY h:mm a'));
    };

    $(document).ready(function () {
        datetime = $('#datetime')
        update();
        setInterval(update, 1000);
    });

</script>
<!--- /PAGE WRAPPER  --->

<!-- Custom Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">
<!-- Bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script>
<!-- Font Awesome -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
<!-- momentjs-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.2/moment.min.js"></script>
<!--antimate.css-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.css"></script>

</body>
</html>